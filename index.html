<!doctype html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>אורח חיים בריא – מעקב אוכל יומי</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0b1220">
  <link rel="icon" href="icons/icon-192.png">
  <link rel="apple-touch-icon" href="icons/icon-192.png">
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="app">
    <header class="topbar">
      <div class="brand">
        <div class="logo">🍽️</div>
        <div>
          <div class="brand-title">אורח חיים בריא</div>
          <div class="brand-sub" id="welcomeSub">מעקב אוכל יומי</div>
        </div>
      </div>

      <div class="top-actions">
        <button class="icon-btn" id="installBtn" title="התקנה למסך הבית" hidden>התקנה</button>
        <button class="icon-btn" id="settingsBtn" title="הגדרות">⚙️</button>
      </div>
    </header>

    <main class="content">

      <!-- ONBOARDING -->
      <section class="screen" id="screenOnboarding" hidden>
        <div class="card hero">
          <h1>בוא נתחיל 😊</h1>
          <p class="muted">האפליקציה שומרת נתונים <b>רק במכשיר שלך</b> (Local Storage). אין שרת.</p>

          <div class="form">
            <label>
              <span>איך קוראים לך?</span>
              <input id="nameInput" type="text" placeholder="לדוגמה: דוד" autocomplete="name">
            </label>
            <button class="primary" id="startBtn">המשך</button>
          </div>
        </div>

        <div class="grid two">
          <div class="card">
            <h3>מה תקבל כאן?</h3>
            <ul class="bullets">
              <li>יעד קלורי אישי לפי הנתונים שלך</li>
              <li>יומן יומי + היסטוריה לפי תאריכים</li>
              <li>סיכום מאקרו: חלבון/פחמימה/שומן</li>
              <li>מעקב שתייה + תזכורות חכמות</li>
              <li>אפשרות תמונה למנה (שמירה + הערכה)</li>
            </ul>
          </div>
          <div class="card note">
            <h3>חשוב לדעת</h3>
            <p class="muted">
              חישובי קלוריות/מאקרו הם הערכה. להתאמה רפואית/דיאטה – מומלץ להתייעץ עם איש מקצוע.
            </p>
          </div>
        </div>
      </section>

      <!-- PROFILE -->
      <section class="screen" id="screenProfile" hidden>
        <div class="card">
          <div class="row between">
            <h2>פרופיל אישי</h2>
            <span class="pill" id="profileNamePill"></span>
          </div>
          <p class="muted">נחשב לך את צריכת הקלוריות היומית לשמירה על משקל (Maintenance).</p>

          <div class="grid two">
            <label class="field">
              <span>גיל</span>
              <input id="ageInput" type="number" min="10" max="120" inputmode="numeric" placeholder="לדוגמה: 35">
            </label>

            <label class="field">
              <span>מגדר</span>
              <select id="genderInput">
                <option value="male">גבר</option>
                <option value="female">אישה</option>
              </select>
            </label>

            <label class="field">
              <span>גובה (ס"מ)</span>
              <input id="heightInput" type="number" min="120" max="230" inputmode="numeric" placeholder="לדוגמה: 178">
            </label>

            <label class="field">
              <span>משקל (ק"ג)</span>
              <input id="weightInput" type="number" min="35" max="250" step="0.1" inputmode="decimal" placeholder="לדוגמה: 82.5">
            </label>

            <label class="field">
              <span>פעילות גופנית</span>
              <select id="activityInput">
                <option value="1.2">יושבני / כמעט בלי ספורט</option>
                <option value="1.375">קל (1–3 פעמים בשבוע)</option>
                <option value="1.55">בינוני (3–5 פעמים בשבוע)</option>
                <option value="1.725">גבוה (6–7 פעמים בשבוע)</option>
                <option value="1.9">מאוד גבוה (עבודה פיזית/אימונים כפולים)</option>
              </select>
            </label>

            <label class="field">
              <span>יעד מים יומי (ליטר)</span>
              <input id="waterGoalInput" type="number" min="0.5" max="8" step="0.1" inputmode="decimal" placeholder="לדוגמה: 2.5">
              <small class="hint">ברירת מחדל: ~35 מ"ל לכל ק"ג</small>
            </label>
          </div>

          <div class="row gap">
            <button class="primary" id="saveProfileBtn">שמור והמשך</button>
            <button class="ghost" id="backToOnboardingBtn">חזרה</button>
          </div>
        </div>

        <div class="grid two">
          <div class="card">
            <h3>איך מחושב היעד?</h3>
            <p class="muted">
              משתמשים בנוסחת Mifflin‑St Jeor לחישוב BMR ואז מכפילים בפקטור פעילות (TDEE).
            </p>
          </div>
          <div class="card note">
            <h3>טיפ</h3>
            <p class="muted">אם אתה רוצה לשנות יעד (חיטוב/מסה) – אפשר בהגדרות.</p>
          </div>
        </div>
      </section>

      <!-- DASHBOARD -->
      <section class="screen" id="screenDashboard" hidden>
        <div class="grid two">
          <div class="card">
            <div class="row between">
              <h2>היום</h2>
              <div class="date-pill" id="todayPill"></div>
            </div>

            <div class="kpis">
              <div class="kpi">
                <div class="kpi-label">קלוריות שנאכלו</div>
                <div class="kpi-value" id="kcalEaten">0</div>
              </div>
              <div class="kpi">
                <div class="kpi-label">מותר היום</div>
                <div class="kpi-value" id="kcalLimit">—</div>
              </div>
            </div>

            <div class="progress-wrap">
              <div class="progress-head">
                <span>התקדמות קלוריות</span>
                <span class="muted" id="kcalProgressText"></span>
              </div>
              <div class="progress">
                <div class="bar" id="kcalBar" style="width:0%"></div>
              </div>
            </div>

            <div class="row gap wrap">
              <button class="primary" id="addFoodBtn">+ הזנת אוכל</button>
              <button class="ghost" id="historyBtn">יומן/היסטוריה</button>
              <button class="chip" id="eatingOutBtn" title="מצב ארוחה בחוץ">🍽️ ארוחה בחוץ</button>
              <button class="chip" id="restDayBtn" title="מצב שבת/חופש">🛌 יום חופשי</button>
            </div>
          </div>

          <div class="card">
            <div class="row between">
              <h2>מאקרו יומי</h2>
              <button class="chip" id="macroTargetsBtn" title="שינוי יעדי מאקרו">יעדים</button>
            </div>

            <div class="macro">
              <div class="macro-row">
                <div class="macro-label">חלבון <span class="muted" id="proteinText"></span></div>
                <div class="progress"><div class="bar" id="proteinBar" style="width:0%"></div></div>
              </div>
              <div class="macro-row">
                <div class="macro-label">פחמימה <span class="muted" id="carbText"></span></div>
                <div class="progress"><div class="bar" id="carbBar" style="width:0%"></div></div>
              </div>
              <div class="macro-row">
                <div class="macro-label">שומן <span class="muted" id="fatText"></span></div>
                <div class="progress"><div class="bar" id="fatBar" style="width:0%"></div></div>
              </div>
            </div>

            <hr class="sep">

            <div class="row between">
              <h2>שתייה</h2>
              <button class="chip" id="notifyBtn" title="הפעלת תזכורות">🔔</button>
            </div>

            <div class="kpis">
              <div class="kpi">
                <div class="kpi-label">שתית היום (מ"ל)</div>
                <div class="kpi-value" id="waterDrank">0</div>
              </div>
              <div class="kpi">
                <div class="kpi-label">יעד (מ"ל)</div>
                <div class="kpi-value" id="waterGoal">—</div>
              </div>
            </div>

            <div class="progress-wrap">
              <div class="progress-head">
                <span>התקדמות שתייה</span>
                <span class="muted" id="waterProgressText"></span>
              </div>
              <div class="progress">
                <div class="bar" id="waterBar" style="width:0%"></div>
              </div>
            </div>

            <div class="row gap wrap">
              <button class="ghost" data-water="200">+200</button>
              <button class="ghost" data-water="300">+300</button>
              <button class="ghost" data-water="500">+500</button>
              <button class="primary" id="waterCustomBtn">מותאם</button>
            </div>

            <p class="muted small" id="smartHint"></p>
          </div>
        
        <div class="grid two" style="margin-top:14px">
          <div class="card">
            <div class="row between">
              <h2>משקל</h2>
              <button class="chip" id="weightBtn">רישום</button>
            </div>
            <p class="muted small">מומלץ לשקול פעם בשבוע. נציג מגמת שינוי (Trend).</p>
            <div class="kpis">
              <div class="kpi">
                <div class="kpi-label">שקילה אחרונה</div>
                <div class="kpi-value" id="lastWeight">—</div>
              </div>
              <div class="kpi">
                <div class="kpi-label">מגמה (28 ימים)</div>
                <div class="kpi-value" id="weightTrend">—</div>
              </div>
            </div>
            <div class="progress-wrap">
              <div class="progress-head">
                <span>עקיבות שבועית</span>
                <span class="muted" id="weighInHint">—</span>
              </div>
              <div class="progress">
                <div class="bar" id="weighInBar" style="width:0%"></div>
              </div>
            </div>
          </div>

          <div class="card">
            <div class="row between">
              <h2>בנק ארוחות</h2>
              <button class="chip" id="favoritesBtn">פתח</button>
            </div>
            <p class="muted small">שמור ארוחות קבועות והוסף אותן בלחיצה.</p>
            <div id="favoritesPreview" class="list"></div>
          </div>
        </div>
</div>

        <div class="card">
          <div class="row between">
            <h3>מה אכלתי היום</h3>
            <div class="row gap">
              <button class="chip" id="exportBtn" title="ייצוא גיבוי">ייצוא</button>
              <button class="chip" id="importBtn" title="ייבוא גיבוי">ייבוא</button>
              <input type="file" id="importFile" accept="application/json" hidden>
            </div>
          </div>
          <div id="todayFoods" class="list"></div>
        </div>

      </section>

      <!-- MODALS -->
      <div class="modal" id="modal" hidden>
        <div class="modal-card">
          <div class="modal-head">
            <div class="modal-title" id="modalTitle">כותרת</div>
            <button class="icon-btn" id="modalClose">✕</button>
          </div>
          <div class="modal-body" id="modalBody"></div>
          <div class="modal-actions" id="modalActions"></div>
        </div>
      </div>

      <footer class="footer">
        <span class="muted">v1.0 • נשמר מקומית במכשיר</span>
      </footer>

    </main>
  </div>

  <script src="app.js"></script>
</body>
</html>
